<?xml version="1.0" encoding="UTF-8"?>
<svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 1400 900">
  <title>Diagramme des Entités Métier - ManohPressing</title>
  
  <!-- Styles -->
  <defs>
    <style>
      .entity { fill: #e8f4fd; stroke: #1976d2; stroke-width: 3; rx: 12; }
      .enum { fill: #fef3c7; stroke: #d97706; stroke-width: 2; rx: 8; }
      .text { font-family: Arial, sans-serif; font-size: 11px; }
      .title { font-size: 24px; font-weight: bold; text-anchor: middle; fill: #1e293b; }
      .class-name { font-size: 16px; font-weight: bold; text-anchor: middle; fill: #1e40af; }
      .enum-name { font-size: 14px; font-weight: bold; text-anchor: middle; fill: #92400e; }
      .section-title { font-size: 18px; font-weight: bold; text-anchor: middle; fill: #374151; }
      .line { stroke: #374151; stroke-width: 1.5; fill: none; }
      .composition { stroke: #dc2626; stroke-width: 4; marker-end: url(#diamond); }
      .association { stroke: #059669; stroke-width: 3; marker-end: url(#arrow); }
      .enum-relation { stroke: #d97706; stroke-width: 2; stroke-dasharray: 6,3; marker-end: url(#arrow-orange); }
      .attribute { fill: #374151; }
      .method { fill: #6b7280; }
      .enum-value { fill: #92400e; }
    </style>
    
    <!-- Marqueurs pour les flèches -->
    <marker id="arrow" markerWidth="14" markerHeight="10" refX="13" refY="5" orient="auto">
      <polygon points="0 0, 14 5, 0 10" fill="#059669"/>
    </marker>
    
    <marker id="arrow-orange" markerWidth="12" markerHeight="8" refX="11" refY="4" orient="auto">
      <polygon points="0 0, 12 4, 0 8" fill="#d97706"/>
    </marker>
    
    <marker id="diamond" markerWidth="16" markerHeight="12" refX="16" refY="6" orient="auto">
      <polygon points="0 6, 8 0, 16 6, 8 12" fill="#dc2626"/>
    </marker>
  </defs>
  
  <!-- Titre principal -->
  <text x="700" y="40" class="title">📦 Entités Métier - ManohPressing</text>
  <text x="700" y="65" style="font-size: 14px; text-anchor: middle; fill: #6b7280;">
    Modèle de données du domaine métier
  </text>
  
  <!-- Section Entités Principales -->
  <text x="350" y="110" class="section-title">🏢 ENTITÉS PRINCIPALES</text>
  
  <!-- User -->
  <g id="user-entity">
    <rect x="50" y="130" width="200" height="220" class="entity"/>
    <text x="150" y="155" class="class-name">👤 User</text>
    <line x1="50" y1="170" x2="250" y2="170" class="line"/>
    
    <!-- Attributs -->
    <text x="60" y="190" class="text attribute">🔑 id: int</text>
    <text x="60" y="205" class="text attribute">👤 username: string</text>
    <text x="60" y="220" class="text attribute">🔒 password: string</text>
    <text x="60" y="235" class="text attribute">🎭 role: UserRole</text>
    <text x="60" y="250" class="text attribute">📝 firstName: string</text>
    <text x="60" y="265" class="text attribute">📝 lastName: string</text>
    <text x="60" y="280" class="text attribute">📧 email: string</text>
    <text x="60" y="295" class="text attribute">📱 phone: string</text>
    <text x="60" y="310" class="text attribute">🏠 address: string</text>
    <text x="60" y="325" class="text attribute">⭐ loyaltyPoints: int</text>
    <text x="60" y="340" class="text attribute">📅 createdAt: datetime</text>
  </g>
  
  <!-- Order -->
  <g id="order-entity">
    <rect x="300" y="130" width="220" height="220" class="entity"/>
    <text x="410" y="155" class="class-name">📦 Order</text>
    <line x1="300" y1="170" x2="520" y2="170" class="line"/>
    
    <!-- Attributs -->
    <text x="310" y="190" class="text attribute">🔑 id: int</text>
    <text x="310" y="205" class="text attribute">📋 orderNumber: string</text>
    <text x="310" y="220" class="text attribute">👤 customerId: int</text>
    <text x="310" y="235" class="text attribute">👔 managerId: int</text>
    <text x="310" y="250" class="text attribute">💰 total: float</text>
    <text x="310" y="265" class="text attribute">📊 status: OrderStatus</text>
    <text x="310" y="280" class="text attribute">💳 paymentStatus: PaymentStatus</text>
    <text x="310" y="295" class="text attribute">📅 createdAt: datetime</text>
    <text x="310" y="310" class="text attribute">📅 updatedAt: datetime</text>
    <text x="310" y="325" class="text attribute">📝 notes: string</text>
    <text x="310" y="340" class="text attribute">🚚 deliveredAt: datetime</text>
  </g>
  
  <!-- Service -->
  <g id="service-entity">
    <rect x="570" y="130" width="200" height="180" class="entity"/>
    <text x="670" y="155" class="class-name">🛍️ Service</text>
    <line x1="570" y1="170" x2="770" y2="170" class="line"/>
    
    <!-- Attributs -->
    <text x="580" y="190" class="text attribute">🔑 id: int</text>
    <text x="580" y="205" class="text attribute">📝 name: string</text>
    <text x="580" y="220" class="text attribute">💰 price: float</text>
    <text x="580" y="235" class="text attribute">🔢 quantity: int</text>
    <text x="580" y="250" class="text attribute">📦 orderId: int</text>
    <text x="580" y="265" class="text attribute">📝 description: string</text>
    <text x="580" y="280" class="text attribute">⏱️ duration: int</text>
    <text x="580" y="295" class="text attribute">📅 createdAt: datetime</text>
  </g>
  
  <!-- Section Entités Spécialisées -->
  <text x="350" y="410" class="section-title">🎯 ENTITÉS SPÉCIALISÉES</text>
  
  <!-- DepositCoupon -->
  <g id="coupon-entity">
    <rect x="50" y="430" width="220" height="240" class="entity"/>
    <text x="160" y="455" class="class-name">🎫 DepositCoupon</text>
    <line x1="50" y1="470" x2="270" y2="470" class="line"/>
    
    <!-- Attributs -->
    <text x="60" y="490" class="text attribute">🔑 id: int</text>
    <text x="60" y="505" class="text attribute">🏷️ code: string</text>
    <text x="60" y="520" class="text attribute">👤 customerId: int</text>
    <text x="60" y="535" class="text attribute">📦 orderId: int</text>
    <text x="60" y="550" class="text attribute">📊 status: CouponStatus</text>
    <text x="60" y="565" class="text attribute">⏰ validUntil: datetime</text>
    <text x="60" y="580" class="text attribute">🔢 itemsCount: int</text>
    <text x="60" y="595" class="text attribute">📝 itemsDescription: string</text>
    <text x="60" y="610" class="text attribute">📅 createdAt: datetime</text>
    <text x="60" y="625" class="text attribute">📅 collectedAt: datetime</text>
    <text x="60" y="640" class="text attribute">🏪 pickupLocation: string</text>
    <text x="60" y="655" class="text attribute">📅 depositDate: datetime</text>
  </g>
  
  <!-- MobilePayment -->
  <g id="payment-entity">
    <rect x="320" y="430" width="220" height="240" class="entity"/>
    <text x="430" y="455" class="class-name">💳 MobilePayment</text>
    <line x1="320" y1="470" x2="540" y2="470" class="line"/>
    
    <!-- Attributs -->
    <text x="330" y="490" class="text attribute">🔑 id: int</text>
    <text x="330" y="505" class="text attribute">🏷️ transactionId: string</text>
    <text x="330" y="520" class="text attribute">📦 orderId: int</text>
    <text x="330" y="535" class="text attribute">👤 customerId: int</text>
    <text x="330" y="550" class="text attribute">💰 amount: float</text>
    <text x="330" y="565" class="text attribute">💸 fees: float</text>
    <text x="330" y="580" class="text attribute">📱 phoneNumber: string</text>
    <text x="330" y="595" class="text attribute">🏦 paymentMethod: PaymentMethod</text>
    <text x="330" y="610" class="text attribute">📊 status: PaymentStatus</text>
    <text x="330" y="625" class="text attribute">📅 createdAt: datetime</text>
    <text x="330" y="640" class="text attribute">📅 completedAt: datetime</text>
    <text x="330" y="655" class="text attribute">🔢 attempts: int</text>
  </g>
  
  <!-- Section Énumérations -->
  <text x="1100" y="110" class="section-title">📋 ÉNUMÉRATIONS</text>
  
  <!-- UserRole -->
  <g id="user-role-enum">
    <rect x="900" y="130" width="140" height="100" class="enum"/>
    <text x="970" y="150" class="enum-name">UserRole</text>
    <line x1="900" y1="160" x2="1040" y2="160" class="line"/>
    <text x="910" y="180" class="text enum-value">ADMIN</text>
    <text x="910" y="195" class="text enum-value">MANAGER</text>
    <text x="910" y="210" class="text enum-value">CLIENT</text>
  </g>
  
  <!-- OrderStatus -->
  <g id="order-status-enum">
    <rect x="1080" y="130" width="140" height="120" class="enum"/>
    <text x="1150" y="150" class="enum-name">OrderStatus</text>
    <line x1="1080" y1="160" x2="1220" y2="160" class="line"/>
    <text x="1090" y="180" class="text enum-value">PENDING</text>
    <text x="1090" y="195" class="text enum-value">IN_PROGRESS</text>
    <text x="1090" y="210" class="text enum-value">READY</text>
    <text x="1090" y="225" class="text enum-value">DELIVERED</text>
    <text x="1090" y="240" class="text enum-value">CANCELLED</text>
  </g>
  
  <!-- PaymentMethod -->
  <g id="payment-method-enum">
    <rect x="900" y="270" width="140" height="100" class="enum"/>
    <text x="970" y="290" class="enum-name">PaymentMethod</text>
    <line x1="900" y1="300" x2="1040" y2="300" class="line"/>
    <text x="910" y="320" class="text enum-value">ORANGE_MONEY</text>
    <text x="910" y="335" class="text enum-value">MTN_MONEY</text>
    <text x="910" y="350" class="text enum-value">CASH</text>
  </g>
  
  <!-- PaymentStatus -->
  <g id="payment-status-enum">
    <rect x="1080" y="270" width="140" height="120" class="enum"/>
    <text x="1150" y="290" class="enum-name">PaymentStatus</text>
    <line x1="1080" y1="300" x2="1220" y2="300" class="line"/>
    <text x="1090" y="320" class="text enum-value">PENDING</text>
    <text x="1090" y="335" class="text enum-value">PROCESSING</text>
    <text x="1090" y="350" class="text enum-value">COMPLETED</text>
    <text x="1090" y="365" class="text enum-value">FAILED</text>
    <text x="1090" y="380" class="text enum-value">CANCELLED</text>
  </g>
  
  <!-- CouponStatus -->
  <g id="coupon-status-enum">
    <rect x="900" y="410" width="160" height="120" class="enum"/>
    <text x="980" y="430" class="enum-name">CouponStatus</text>
    <line x1="900" y1="440" x2="1060" y2="440" class="line"/>
    <text x="910" y="460" class="text enum-value">PENDING_VALIDATION</text>
    <text x="910" y="475" class="text enum-value">ACTIVE</text>
    <text x="910" y="490" class="text enum-value">COLLECTED</text>
    <text x="910" y="505" class="text enum-value">EXPIRED</text>
    <text x="910" y="520" class="text enum-value">CANCELLED</text>
  </g>
  
  <!-- Relations entre entités -->
  <g id="entity-relations">
    <!-- User -> Order (composition) -->
    <line x1="250" y1="240" x2="300" y2="240" class="composition"/>
    <text x="260" y="235" class="text" style="font-size: 10px; fill: #dc2626; font-weight: bold;">1</text>
    <text x="285" y="235" class="text" style="font-size: 10px; fill: #dc2626; font-weight: bold;">0..*</text>
    <text x="275" y="255" class="text" style="font-size: 9px; fill: #dc2626;">crée</text>
    
    <!-- Order -> Service (composition) -->
    <line x1="520" y1="240" x2="570" y2="240" class="composition"/>
    <text x="530" y="235" class="text" style="font-size: 10px; fill: #dc2626; font-weight: bold;">1</text>
    <text x="555" y="235" class="text" style="font-size: 10px; fill: #dc2626; font-weight: bold;">1..*</text>
    <text x="545" y="255" class="text" style="font-size: 9px; fill: #dc2626;">contient</text>
    
    <!-- Order -> DepositCoupon (association) -->
    <line x1="360" y1="350" x2="200" y2="430" class="association"/>
    <text x="280" y="385" class="text" style="font-size: 10px; fill: #059669; font-weight: bold;">1</text>
    <text x="210" y="425" class="text" style="font-size: 10px; fill: #059669; font-weight: bold;">0..1</text>
    <text x="270" y="400" class="text" style="font-size: 9px; fill: #059669;">génère</text>
    
    <!-- Order -> MobilePayment (association) -->
    <line x1="410" y1="350" x2="430" y2="430" class="association"/>
    <text x="415" y="380" class="text" style="font-size: 10px; fill: #059669; font-weight: bold;">1</text>
    <text x="435" y="425" class="text" style="font-size: 10px; fill: #059669; font-weight: bold;">0..1</text>
    <text x="425" y="395" class="text" style="font-size: 9px; fill: #059669;">payé par</text>
  </g>
  
  <!-- Relations vers énumérations -->
  <g id="enum-relations">
    <!-- User -> UserRole -->
    <line x1="250" y1="235" x2="900" y2="180" class="enum-relation"/>
    
    <!-- Order -> OrderStatus -->
    <line x1="520" y1="265" x2="1080" y2="190" class="enum-relation"/>
    
    <!-- Order -> PaymentStatus -->
    <line x1="520" y1="280" x2="1080" y2="330" class="enum-relation"/>
    
    <!-- MobilePayment -> PaymentMethod -->
    <line x1="540" y1="595" x2="900" y2="320" class="enum-relation"/>
    
    <!-- MobilePayment -> PaymentStatus -->
    <line x1="540" y1="610" x2="1080" y2="350" class="enum-relation"/>
    
    <!-- DepositCoupon -> CouponStatus -->
    <line x1="270" y1="550" x2="900" y2="470" class="enum-relation"/>
  </g>
  
  <!-- Workflow métier -->
  <g id="business-workflow">
    <rect x="50" y="720" width="1300" height="120" fill="#f8fafc" stroke="#e2e8f0" stroke-width="2" rx="12"/>
    <text x="700" y="745" class="section-title">🔄 WORKFLOW MÉTIER</text>
    
    <!-- Étapes -->
    <rect x="80" y="760" width="150" height="60" fill="#dbeafe" stroke="#3b82f6" stroke-width="2" rx="8"/>
    <text x="155" y="785" class="text" style="text-anchor: middle; font-weight: bold;">1. Création User</text>
    <text x="155" y="800" class="text" style="text-anchor: middle; font-size: 10px;">Client/Gérant créé</text>
    
    <rect x="260" y="760" width="150" height="60" fill="#dcfce7" stroke="#16a34a" stroke-width="2" rx="8"/>
    <text x="335" y="785" class="text" style="text-anchor: middle; font-weight: bold;">2. Commande</text>
    <text x="335" y="800" class="text" style="text-anchor: middle; font-size: 10px;">Order + Services</text>
    
    <rect x="440" y="760" width="150" height="60" fill="#fef3c7" stroke="#d97706" stroke-width="2" rx="8"/>
    <text x="515" y="785" class="text" style="text-anchor: middle; font-weight: bold;">3. Traitement</text>
    <text x="515" y="800" class="text" style="text-anchor: middle; font-size: 10px;">Statuts progressent</text>
    
    <rect x="620" y="760" width="150" height="60" fill="#fce7f3" stroke="#ec4899" stroke-width="2" rx="8"/>
    <text x="695" y="785" class="text" style="text-anchor: middle; font-weight: bold;">4. Livraison</text>
    <text x="695" y="800" class="text" style="text-anchor: middle; font-size: 10px;">DepositCoupon généré</text>
    
    <rect x="800" y="760" width="150" height="60" fill="#f3e8ff" stroke="#a855f7" stroke-width="2" rx="8"/>
    <text x="875" y="785" class="text" style="text-anchor: middle; font-weight: bold;">5. Paiement</text>
    <text x="875" y="800" class="text" style="text-anchor: middle; font-size: 10px;">MobilePayment</text>
    
    <!-- Flèches workflow -->
    <polygon points="235,790 255,785 255,795" fill="#374151"/>
    <polygon points="415,790 435,785 435,795" fill="#374151"/>
    <polygon points="595,790 615,785 615,795" fill="#374151"/>
    <polygon points="775,790 795,785 795,795" fill="#374151"/>
  </g>
  
  <!-- Légende -->
  <g id="entities-legend">
    <rect x="1100" y="550" width="250" height="150" fill="white" stroke="#374151" stroke-width="2" rx="10"/>
    <text x="1110" y="575" class="text" style="font-weight: bold; font-size: 14px;">📋 LÉGENDE</text>
    
    <rect x="1110" y="590" width="60" height="15" class="entity"/>
    <text x="1180" y="602" class="text">📦 Entités métier</text>
    
    <rect x="1110" y="615" width="60" height="15" class="enum"/>
    <text x="1180" y="627" class="text">📋 Énumérations</text>
    
    <line x1="1110" y1="642" x2="1150" y2="642" class="composition"/>
    <text x="1160" y="647" class="text">Composition</text>
    
    <line x1="1110" y1="657" x2="1150" y2="657" class="association"/>
    <text x="1160" y="662" class="text">Association</text>
    
    <line x1="1110" y1="672" x2="1150" y2="672" class="enum-relation"/>
    <text x="1160" y="677" class="text">Utilise enum</text>
  </g>
  
  <!-- Informations -->
  <text x="1350" y="880" class="text" style="font-size: 10px; text-anchor: end;">ManohPressing - Entités Métier v1.0</text>
  <text x="1350" y="895" class="text" style="font-size: 9px; text-anchor: end; fill: #6b7280;">Focus sur le modèle de données</text>
</svg>
